<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flipbook Interaktif - Special Day</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&family=Poppins:wght@300;400;500&family=Shadows+Into+Light&display=swap");

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 10px;
      background: linear-gradient(135deg, #f5efe6 0%, #e8dfd8 100%);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      font-family: "Poppins", sans-serif;
      overflow-x: hidden;
    }

    .main-container {
      position: relative;
      width: 100%;
      max-width: 1000px;
      height: 85vh;
      min-height: 500px;
      max-height: 700px;
      perspective: 2000px;
    }

    .flipbook-container {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
    }

    .flipbook {
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
      border-radius: 5px;
    }

    .page {
      background-color: white;
      border-radius: 3px;
      background-size: cover;
      background-position: center;
      position: relative;
      transition: transform 0.5s, box-shadow 0.35s;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    .page::after {
      content: "";
      position: absolute;
      top: 0;
      right: 0;
      width: 25px;
      height: 100%;
      background: linear-gradient(to left, rgba(0, 0, 0, 0.05), transparent);
    }

    .page-content {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      box-sizing: border-box;
      padding: clamp(15px, 4vw, 30px);
      position: relative;
      z-index: 2;
    }

    .cover {
      background: linear-gradient(135deg, #6d4c41 0%, #3e2723 100%);
      color: white;
      position: relative;
      overflow: hidden;
    }

    .cover::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDYwIDYwIj4KICA8ZyBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMjU1LDI1NSwyNTUsMC4xNSkiIHN0cm9rZS13aWR0aD0iMSI+CiAgICA8cGF0aCBkPSJNMzAgMzBtLTMwIDBhMzAgMzAgMCAxIDAgNjAgMCAzMCAzMCAwIDEgMC02MCAweiIvPgogICAgPHBhdGggZD0iTTMwIDMwbTIwIDBhMjAgMjAgMCAxIDEtNDAgMCAyMCAyMCAwIDEgMSA0MCAweiIvPgogIDwvZz4KPC9zdmc+");
      opacity: 0.2;
    }

    .cover h1 {
      font-size: clamp(18px, 6vw, 48px);
      margin-bottom: 15px;
      font-family: "Dancing Script", cursive;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      letter-spacing: 1px;
      transform: translateY(-10px);
      opacity: 0;
      animation: fadeInDown 1s ease forwards 0.5s;
    }

    .cover h2 {
      font-size: clamp(14px, 3vw, 24px);
      font-weight: 300;
      letter-spacing: 2px;
      text-transform: uppercase;
      transform: translateY(10px);
      opacity: 0;
      animation: fadeInUp 1s ease forwards 0.8s;
    }

    @keyframes fadeInDown {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .photo-page {
      background-color: #fcfaf7;
      position: relative;
    }

    .photo-page::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+CjxyZWN0IHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0iI2ZjZmFmNyI+PC9yZWN0Pgo8Y2lyY2xlIGN4PSIxMCIgY3k9IjEwIiByPSIwLjUiIGZpbGw9IiNmMWU3ZGQiPjwvY2lyY2xlPgo8L3N2Zz4=");
      opacity: 0.6;
      z-index: 1;
    }

    .polaroid {
      background: white;
      padding: 12px 12px 30px 12px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
      transform: rotate(-3deg);
      width: min(75%, 300px);
      margin: 20px auto;
      position: relative;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      z-index: 2;
    }

    .polaroid:hover {
      transform: rotate(-2deg) translateY(-5px);
      box-shadow: 0 12px 20px rgba(0, 0, 0, 0.2);
    }

    .polaroid img {
      width: 100%;
      height: auto;
      filter: saturate(1.1) contrast(1.05);
      transition: filter 0.3s ease;
    }

    .polaroid:hover img {
      filter: saturate(1.2) contrast(1.1);
    }

    .polaroid p {
      text-align: center;
      margin-top: 12px;
      font-family: "Shadows Into Light", cursive;
      font-size: clamp(14px, 2.5vw, 20px);
      color: #444;
    }

    .tape {
      position: absolute;
      background-color: rgba(255, 255, 255, 0.7);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      z-index: 3;
    }

    .tape-top {
      width: clamp(60px, 10vw, 100px);
      height: 25px;
      transform: rotate(-45deg);
      top: 20px;
      left: 20px;
    }

    .tape-bottom {
      width: clamp(40px, 8vw, 60px);
      height: 25px;
      transform: rotate(45deg);
      bottom: 40px;
      right: 20px;
    }

    .controls {
      position: absolute;
      bottom: -70px;
      left: 0;
      width: 100%;
      display: flex;
      justify-content: center;
      gap: clamp(15px, 4vw, 30px);
      padding: 15px 0;
      flex-wrap: wrap;
    }

    .btn {
      padding: clamp(8px, 2vw, 12px) clamp(16px, 4vw, 24px);
      background: linear-gradient(to bottom, #8d6e63 0%, #6d4c41 100%);
      color: white;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      font-size: clamp(12px, 2.5vw, 16px);
      font-weight: 500;
      letter-spacing: 1px;
      transition: all 0.3s;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
      display: flex;
      align-items: center;
      gap: 8px;
      white-space: nowrap;
    }

    .btn:hover {
      background: linear-gradient(to bottom, #a1887f 0%, #8d6e63 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
    }

    .btn:active {
      transform: translateY(0);
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      background: linear-gradient(to bottom, #bbb 0%, #999 100%);
    }

    .btn:disabled:hover {
      transform: none;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
      background: linear-gradient(to bottom, #bbb 0%, #999 100%);
    }

    .page-number {
      position: absolute;
      bottom: 15px;
      font-size: clamp(10px, 1.5vw, 12px);
      color: #888;
      font-style: italic;
    }

    .photo-frame {
      border: 12px solid white;
      box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
      max-width: min(75%, 300px);
      margin: 15px 0;
      transform: rotate(-3deg);
      position: relative;
      overflow: hidden;
      transition: transform 0.3s ease;
    }

    .photo-frame:hover {
      transform: rotate(-1deg) scale(1.02);
    }

    .photo-frame img {
      width: 100%;
      display: block;
      transition: transform 0.5s ease;
    }

    .photo-frame:hover img {
      transform: scale(1.05);
    }

    .turned-edge {
      position: absolute;
      bottom: 0;
      right: 0;
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg,
          transparent 50%,
          rgba(0, 0, 0, 0.05) 50%);
    }

    .hard {
      background: linear-gradient(135deg, #5d4037 0%, #3e2723 100%);
      color: white;
    }

    .hard h2 {
      font-family: "Dancing Script", cursive;
      font-size: clamp(24px, 5vw, 36px);
      margin-bottom: 20px;
      text-shadow: 0 2px 3px rgba(0, 0, 0, 0.3);
    }

    .hard p {
      font-size: clamp(14px, 2.5vw, 18px);
      font-weight: 300;
      max-width: 80%;
      line-height: 1.6;
    }

    /* Regular page styles */
    .regular-page h2 {
      color: #5d4037;
      font-size: clamp(20px, 4vw, 32px);
      font-family: "Dancing Script", cursive;
      margin-bottom: 25px;
      position: relative;
    }

    .regular-page h2::after {
      content: "";
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: clamp(60px, 15vw, 100px);
      height: 2px;
      background: linear-gradient(to right,
          transparent,
          #8d6e63,
          transparent);
    }

    .regular-page p {
      color: #5d4037;
      font-size: clamp(12px, 2vw, 16px);
      line-height: 1.6;
      margin-top: 15px;
      font-weight: 300;
    }

    /* Decorative elements */
    .decorative-corner {
      position: absolute;
      width: clamp(40px, 8vw, 60px);
      height: clamp(40px, 8vw, 60px);
      opacity: 0.2;
      z-index: 1;
    }

    .top-left {
      top: 20px;
      left: 20px;
      background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDYwIDYwIj4KICA8cGF0aCBkPSJNMCAwIEwzMCAwIEMzMCAwIDMwIDMwIDAgMzAgWiIgZmlsbD0iIzZkNGM0MSIvPgo8L3N2Zz4=");
    }

    .bottom-right {
      bottom: 20px;
      right: 20px;
      background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDYwIDYwIj4KICA8cGF0aCBkPSJNNjAgNjAgTDYwIDMwIEMzMCAzMCAzMCA2MCA2MCA2MCBaIiBmaWxsPSIjNmQ0YzQxIi8+Cjwvc3ZnPg==");
    }

    /* Page turning effects */
    .turning {
      pointer-events: none;
    }

    .turning-right {
      animation: turnRight 0.6s ease-in-out;
    }

    .turning-left {
      animation: turnLeft 0.6s ease-in-out;
    }

    @keyframes turnRight {
      0% {
        transform: rotateY(0deg);
      }

      50% {
        transform: rotateY(-15deg);
      }

      100% {
        transform: rotateY(0deg);
      }
    }

    @keyframes turnLeft {
      0% {
        transform: rotateY(0deg);
      }

      50% {
        transform: rotateY(15deg);
      }

      100% {
        transform: rotateY(0deg);
      }
    }

    /* Accessibility and focus styles */
    #flipbook:focus {
      outline: 2px solid #8d6e63;
      outline-offset: 4px;
    }

    /* Touch interaction improvements */
    .flipbook {
      touch-action: pan-y pinch-zoom;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      -webkit-touch-callout: none;
      -webkit-tap-highlight-color: transparent;
    }

    .flipbook * {
      touch-action: inherit;
      pointer-events: auto;
    }

    /* Improve touch responsiveness */
    .page {
      touch-action: inherit;
    }

    /* Mobile tap feedback */
    @media (max-width: 768px) {
      .flipbook {
        cursor: pointer;
      }

      .page:active {
        background-color: rgba(0, 0, 0, 0.02);
      }
    }

    /* Loading animation */
    .loader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #f5efe6;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    .loader-inner {
      width: 50px;
      height: 50px;
      border: 3px solid #6d4c41;
      border-radius: 50%;
      border-top-color: transparent;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /* Navigation hints */
    .navigation-hint {
      position: absolute;
      bottom: 20px;
      font-size: clamp(10px, 1.5vw, 12px);
      color: #888;
      width: 100%;
      text-align: center;
      opacity: 0;
      animation: fadeIn 1s ease forwards 2s;
    }

    @keyframes fadeIn {
      to {
        opacity: 0.7;
      }
    }

    /* Ribbon on special pages */
    .ribbon {
      position: absolute;
      top: 0;
      right: 0;
      width: clamp(80px, 15vw, 120px);
      height: clamp(80px, 15vw, 120px);
      overflow: hidden;
      z-index: 3;
    }

    .ribbon::before {
      content: "Special";
      position: absolute;
      top: clamp(20px, 4vw, 30px);
      right: clamp(-20px, -4vw, -30px);
      transform: rotate(45deg);
      width: 150px;
      background: #8d6e63;
      color: white;
      text-align: center;
      font-size: clamp(10px, 2vw, 14px);
      padding: 5px 0;
      font-weight: 500;
      box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
    }

    /* Mobile specific adjustments */
    @media (max-width: 768px) {
      body {
        padding: 5px;
      }

      .main-container {
        height: 80vh;
        min-height: 400px;
        max-height: none;
      }

      .controls {
        bottom: -60px;
        gap: 15px;
      }

      .btn {
        padding: 8px 16px;
        font-size: 14px;
      }

      .btn i {
        font-size: 12px;
      }

      .polaroid {
        width: 85%;
        padding: 8px 8px 20px 8px;
      }

      .photo-frame {
        max-width: 85%;
        border-width: 8px;
      }

      .tape-top,
      .tape-bottom {
        height: 20px;
      }

      .turned-edge {
        width: 30px;
        height: 30px;
      }

      /* iPhone 12 specific adjustments */
      @media (device-width: 390px) and (device-height: 844px),
      (device-width: 375px) and (device-height: 812px),
      (device-width: 360px) and (device-height: 780px) {
        .main-container {
          height: 75vh;
          min-height: 350px;
        }

        .cover h1 {
          font-size: clamp(20px, 5vw, 32px);
        }

        .cover h2 {
          font-size: clamp(12px, 2.5vw, 16px);
        }

        .polaroid {
          width: 90%;
          margin: 10px auto;
        }

        .photo-frame {
          max-width: 90%;
          border-width: 6px;
        }

        .page-content {
          padding: 10px;
        }

        .regular-page h2 {
          font-size: clamp(18px, 4vw, 24px);
        }

        .regular-page p {
          font-size: clamp(11px, 2vw, 14px);
        }

        .controls {
          bottom: -50px;
          gap: 10px;
        }

        .btn {
          padding: 6px 12px;
          font-size: 12px;
          gap: 4px;
        }
      }
    }

    /* Landscape mobile adjustments */
    @media (max-width: 768px) and (orientation: landscape) {
      .main-container {
        height: 85vh;
      }

      .cover h1 {
        font-size: clamp(20px, 5vw, 36px);
      }

      .cover h2 {
        font-size: clamp(12px, 2.5vw, 18px);
      }

      /* iPhone 12 landscape specific */
      @media (device-width: 844px) and (device-height: 390px),
      (device-width: 812px) and (device-height: 375px),
      (device-width: 780px) and (device-height: 360px) {
        .main-container {
          height: 90vh;
        }

        .polaroid {
          width: 70%;
        }

        .photo-frame {
          max-width: 70%;
        }

        .controls {
          bottom: -40px;
        }
      }
    }

    /* Music Player Modal Styles */
    .music-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .music-modal.active {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      max-width: 90%;
      width: 400px;
      transform: translateY(-20px);
      transition: transform 0.3s ease;
    }

    .music-modal.active .modal-content {
      transform: translateY(0);
    }

    .modal-content h2 {
      color: #5d4037;
      font-family: "Dancing Script", cursive;
      font-size: 24px;
      margin-bottom: 20px;
    }

    .modal-content p {
      color: #666;
      margin-bottom: 25px;
      line-height: 1.6;
    }

    .modal-btn {
      background: linear-gradient(to bottom, #8d6e63 0%, #6d4c41 100%);
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 25px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .modal-btn:hover {
      background: linear-gradient(to bottom, #a1887f 0%, #8d6e63 100%);
      transform: translateY(-2px);
    }

    /* Music Player Styles */
    .music-player {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: white;
      padding: 15px;
      border-radius: 50px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      display: flex;
      align-items: center;
      gap: 15px;
      z-index: 1000;
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s ease;
    }

    .music-player.active {
      transform: translateY(0);
      opacity: 1;
    }

    .music-control {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, #8d6e63 0%, #6d4c41 100%);
      border: none;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .music-control:hover {
      transform: scale(1.1);
    }

    .music-control i {
      font-size: 18px;
    }

    .music-info {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }

    .music-title {
      font-size: 14px;
      color: #5d4037;
      font-weight: 500;
    }

    .music-artist {
      font-size: 12px;
      color: #888;
    }

    @media (max-width: 768px) {
      .modal-content {
        padding: 20px;
        width: 85%;
      }

      .modal-content h2 {
        font-size: 20px;
      }

      .modal-btn {
        padding: 10px 25px;
        font-size: 14px;
      }

      .music-player {
        bottom: 10px;
        right: 10px;
        padding: 10px;
      }

      .music-control {
        width: 35px;
        height: 35px;
      }

      .music-title {
        font-size: 12px;
      }

      .music-artist {
        font-size: 10px;
      }
    }
  </style>
</head>

<body>
  <div class="loader">
    <div class="loader-inner"></div>
  </div>

  <!-- Music Modal -->
  <div class="music-modal" id="musicModal">
    <div class="modal-content">
      <h2>Hi Kanti!!</h2>
      <p>
       Apakah Kamu ingin memutar musik latar belakang?
      </p>
      <button class="modal-btn" id="playMusicBtn">
        <i class="fas fa-music"></i>
        Play Music
      </button>
        <p>Bisa buka web ini pakai laptop biar maksimal</p>
    </div>
  </div>

  <!-- send message modal -->
  <div class="music-modal" id="sendMessageModal">
    <div class="modal-content">
      <h2>Chat sudah terikirim!</h2>
      <p>
       Silahkan buka wa kamu untuk melihat pesan yang sudah dikirim.
      </p>
      <button class="modal-btn" id="hideSendMessageModalBtn">
        <i class="fas fa-thumbs-up"></i>
        Okay
      </button>
    </div>
  </div>

  <!-- Music Player -->
  <div class="music-player" id="musicPlayer">
    <button class="music-control" id="musicControl">
      <i class="fas fa-pause"></i>
    </button>
    <div class="music-info">
      <span class="music-title">One Direction - Where We Are</span>
      <span class="music-artist">"This song is beautiful, isn't it?"</span>
    </div>
  </div>

  <div class="main-container">
    <div class="flipbook-container">
      <div id="flipbook" class="flipbook">
        <!-- Cover -->
        <div class="hard cover">
          <div class="decorative-corner top-left"></div>
          <div class="decorative-corner bottom-right"></div>
          <div class="page-content">
            <h1>to Kanti</h1>
            <h2>----------------</h2>
          </div>
        </div>

        <!-- Inside Cover -->
        <div class="hard">
          <div class="decorative-corner top-left"></div>
          <div class="decorative-corner bottom-right"></div>
          <div class="page-content">
            <h2>Hai Kanti</h2>
            <p>
              Aku nulis ini bukan untuk bikin kamu nggak nyaman, tapi karena aku ngerasa perlu ngungkapin semuanya sebelum bener-bener, ngelepas? Mungkin ini bakal jadi pesan dari aku yang isinya campur aduk, tapi semoga kamu bisa baca sampai akhir.
            </p>
          </div>
        </div>

        <!-- Page 1 & 2 - Photo Collage -->
        <div class="page photo-page">
          <div class="page-content">
            <div class="tape tape-top"></div>
            <div class="polaroid">
              <img src="./sticker 1.gif" alt="sticker" style="width: 60px;"/>
              <p>Seriously, there's really no chance left for me?</p>
            </div>
            <div style="margin-bottom: 10px;">setelah baca semua, bisa jawab disini yah</div>
            <button class="btn answerBtn">
              <i class="fas fa-question"></i>
              Jawab</i>
            </button>
            <div class="tape tape-bottom"></div>
          </div>
        </div>

        <div class="page photo-page">
          <div class="ribbon"></div>
          <div class="page-content">
            <div class="tape tape-top"></div>
            <div class="polaroid" style="transform: rotate(3deg)">
              <div>Kamu itu… beda</div>
              <!-- <img src="" alt="Perjalanan" /> -->
              <p>Di mataku, kamu cantik… cantiknya beda. Cantik yang nggak ngebosenin. Matamu (bagus banget), senyummu, bahkan suaramu (suara km lucu tau) —semuanya punya tempat sendiri di ingatan aku. Muka kamu juga khas banget, susah dicari yang mirip. Setiap kali aku bilang kamu lucu, itu bukan basa-basi, itu benerann</p>
            </div>
            <div class="tape tape-bottom"></div>
          </div>
        </div>

        <div class="page photo-page">
          <div class="page-content">
            <div class="tape tape-top"></div>
            <div class="polaroid">
              <img src="./kanti1.jpeg" alt="kanti1" />
              <div>Coba lihat kamu foto ini,</div>
              <div>How beautiful she is</div>
            </div>
            <div class="tape tape-bottom"></div>
          </div>
        </div>

        <div class="page photo-page">
          <div class="page-content">
            <div class="tape tape-top"></div>
            <div class="polaroid">
              <img src="./kanti2.jpeg" alt="kanti1" />
              <div>ini juga,</div>
              <div>umm cerianya dia</div>
            </div>
            <div class="tape tape-bottom"></div>
          </div>
        </div>

        <!-- Page 3 & 4 - More Photos -->
        <div class="page photo-page">
          <div class="page-content">
            <div class="tape tape-top"></div>
            <div class="polaroid" style="transform: rotate(-2deg)">
              <!-- <img src="/api/placeholder/400/320" alt="Momen spesial" /> -->
               <div>Gausah diraguin kamu emang cantikkk</div>
              <p style="font-size: 18px;">Tapi aku suka bukan cuma karena fisikmu. Kamu tipe cewek ceria yang tetap kalem di luar, tapi cerewet kalau udah nyaman wkw. Kamu juga ramah, baik, pinter, sat-set kalo ngerjain tugas atau kerjaan, ga aneh”,kerja tim kamu bagus, dan pinter masak pula. Nggak heran kalau orang-orang di sekitarmu suka dan nyaman sama kamu. Kamu tu kayak magnet—selalu bisa narik perhatian orang dengan cara km sendiri. liat aja, banyak yang tertarik, cowo? apalagi wkw</p>
            </div>
            <div class="tape tape-bottom"></div>
          </div>
        </div>

        <div class="page photo-page">
          <div class="page-content">
            <div class="tape tape-top"></div>
            <div class="polaroid" style="transform: rotate(4deg)">
              <div>Kita pernah deket</div>
              <p>and that was my first experience bisa ngerasain nyaman sama seorang cewe yg jadi “temen”. gabohong… the fact is you’re my first love. btw dari povku antara tertarik, kagum, sama jatuh cinta itu beda yah. di awal tentu aku tertarik dulu pastinya, tapi makin lama sama kamu aku jatuh... beneran jatuh. </p>
            </div>
            <div class="tape tape-bottom"></div>
          </div>
        </div>

        <div class="page photo-page">
          <div class="page-content">
            <div class="tape tape-top"></div>
            <div class="polaroid" style="transform: rotate(4deg)">
              <div>Kita pernah deket</div>
              <p>Setelah beberapa lama, respon kamu perlahan mulai berubah disaat aku udah ngerasa nyaman dan jatuh banget, dan aku sadar semuanya udah nggak sama lagi, parah sii :((</p>
            </div>
            <div class="tape tape-bottom"></div>
          </div>
        </div>

        <div class="page photo-page">
          <div class="page-content">
            <div class="tape tape-top"></div>
            <div class="polaroid" style="transform: rotate(4deg)">
              <div>Kita pernah deket</div>
              <p>inget ga waktu aku closure km? waktu itu, aku lakuin karena memang aku ada dititik cape berjuang sendiri, sebenernya aku ga mau berhenti tapi feedback km udah kayak gitu :(( dan yahh, ternyata km juga ngelepas. tapi habis itu aku tetep masih lanjut ngechat. karna memang nyatanya aku gabisaaaa</p>
            </div>
            <div class="tape tape-bottom"></div>
          </div>
        </div>

         <div class="page photo-page">
          <div class="page-content">
            <div class="tape tape-top"></div>
            <div class="polaroid" style="transform: rotate(4deg)">
              <div>Kita pernah deket</div>
              <p>aku bahkan ga ngerti kenapa air mataku juga pernah bisa keluar gatau waktu dan tempat. ini langka banget sebelumnya, bahkan gaperna terjadi. dulu aku mikir aku terlalu lebay, tp setelah aku pikir kamu memang segitu berartinya buat aku. kamu worth it buat dikejar. walaupun akhirnya tetep sakit.</p>
            </div>
            <div class="tape tape-bottom"></div>
          </div>
        </div>

         <div class="page photo-page">
          <div class="page-content">
            <div class="tape tape-top"></div>
            <div class="polaroid" style="transform: rotate(4deg)">
              <div>Kita pernah deket</div>
              <p>Aku juga sempat bingung tiap kamu bikin instastory atau postingan yang sedih—aku jadi mikir, itu maksudnya apa ya? Tapi balik lagi, respon kamu ke aku tetap sama. inget banget waktu di couve seturan sebelum kamu balik ke bandung, km mulai nyuekin aku. disitu aku sadar banget kalo ini udah gabisa dilanjutin.</p>
            </div>
            <div class="tape tape-bottom"></div>
          </div>
        </div>

        <div class="page photo-page">
          <div class="page-content">
            <div class="tape tape-top"></div>
            <div class="polaroid" style="transform: rotate(4deg)">
              <div>Kita pernah deket</div>
              <p>Tapi menjelang wisuda, kamu mulai welcome lagi. Dan jujur aja, aku berharap itu jadi tanda kamu masih mau buka hati, tapi kenyataannya mungkin km cuma pengen temenan biasa. tapi aku nganggepnya lebih. Aku sempat pengen confess lagi, tapi waktunya sempit. Kamu pulang, dan sekarang semuanya terasa makin jauh.</p>
            </div>
            <div class="tape tape-bottom"></div>
          </div>
        </div>

        <div class="page photo-page">
          <div class="page-content">
            <div class="tape tape-top"></div>
            <div class="polaroid" style="transform: rotate(4deg)">
              <div>Kita pernah deket</div>
              <p>dan sekarang ini aku mau serius lagi tp gimanapun dari kamu… kamu udah ga ngasih chance lagi. yg sebenernya udah jelas dari respon kamu, bahkan aku juga udah gabisa reply instastory kamu lagi tapi aku masih tetep denial. sampai kemarin kamu sendiri yg bilang secara ga langsung kalau emang udah gaada chance lagi.</p>
            </div>
            <div class="tape tape-bottom"></div>
          </div>
        </div>

         <div class="page photo-page">
          <div class="page-content">
            <div class="tape tape-top"></div>
            <div class="polaroid" style="transform: rotate(4deg)">
              <div>Kita pernah deket</div>
              <p>aku nggak bilang bakal nyerah kaya dulu lagi, tapi aku juga nggak mau kamu sampai ngerasa risih. Maaf ya, aku belum bisa move on. Teman level 4 ini masih terlalu susah buat aku lupain.</p>
              <p>see you kalau masih dipertemukan, hope the best for u and glad to know you</p>
            </div>
            <div class="tape tape-bottom"></div>
          </div>
        </div>

        <!-- Page 5 & 6 - Location & Travel -->
        <div class="page regular-page">
          <div class="decorative-corner top-left"></div>
          <div class="page-content">
            <div>i loved you kanti</div>
            <div>no, actually, i am still love you from afar</div>

            <div class="photo-frame">
              <img src="./sticker 2.gif" alt="Landmark" />
              <div class="turned-edge"></div>
            </div>
            <p>--Rosyihan</p>
          </div>
        </div>

        <div class="page photo-page">
          <div class="page-content">
            <div class="tape tape-top"></div>
            <div class="polaroid">
              <img src="./sticker 1.gif" alt="sticker" style="width: 60px;"/>
              <p>Seriously, there's really no chance left for me?</p>
              <p>engga ada sedikit penjelasan jg kah?</p>
            </div>
            <div class="tape tape-bottom"></div>
          </div>
        </div>

        <!-- Back Cover -->
        <div class="hard">
          <div class="decorative-corner top-left"></div>
          <div class="decorative-corner bottom-right"></div>
          <div class="page-content">
            <p>Learned so much from this experience</p>    
          </div>
        </div>

        <div class="hard cover">
          <div class="decorative-corner top-left"></div>
          <div class="decorative-corner bottom-right"></div>
          <div class="page-content">
            <h2>The End</h2>
          </div>
        </div>
      </div>

      <div class="controls">
        <button class="btn" id="prev">
          <i class="fas fa-chevron-left"></i> Previous
        </button>
        <button class="btn" id="next">
          Next <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>

    <!-- <div class="navigation-hint">
        Gunakan tombol panah kiri/kanan pada keyboard untuk navigasi
      </div> -->
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/3/turn.min.js"></script>
  <script>
    $(document).ready(function () {

      $("#haloBtn").on("click", function () {
        // Show the send message modal
       console.log("haloBtn clicked");
      });
      // Hide loader when everything is loaded
      setTimeout(function () {
        $(".loader").fadeOut(500);
      }, 800);

      // Initialize flipbook with responsive dimensions
      function initFlipbook() {
        const container = $(".flipbook-container");
        const containerWidth = container.width();
        const containerHeight = container.height();

        // Check if device is iPhone 12 or similar
        const isIPhone12 =
          /iPhone/.test(navigator.userAgent) &&
          (window.screen.width === 390 ||
            window.screen.width === 375 ||
            window.screen.width === 360);

        $("#flipbook").turn({
          width: containerWidth,
          height: containerHeight,
          autoCenter: true,
          gradients: true,
          acceleration: true,
          elevation: 50,
          display: window.innerWidth > 768 ? "double" : "single",
          duration: 1200,
          turnCorners: "bl,br,tl,tr",
          when: {
            turning: function (e, page, view) {
              // Optional: Add page turn sound effect
              try {
                const audio = new Audio(
                  "data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYcCSmH0fPTgjMGHm7A7+OZURE="
                );
                audio.volume = 0.1;
                audio.play().catch(() => { });
              } catch (e) { }

              // Add visual effects during page turn
              if (page % 2 === 0) {
                $(this).addClass("turning-right");
              } else {
                $(this).addClass("turning-left");
              }

              setTimeout(() => {
                $(this).removeClass("turning-right turning-left");
              }, 1000);
            },
            turned: function (e, page, view) {
              // Update page number display
              $(".page-number").remove();
              const totalPages = $(this).turn("pages");

              // Update navigation button states
              $("#prev").prop("disabled", page <= 1);
              $("#next").prop("disabled", page >= totalPages);
            },
          },
        });

        // Adjust for iPhone 12
        if (isIPhone12) {
          $(".flipbook").css({
            "transform-origin": "center center",
            transform: "scale(0.95)",
          });
        }
      }

      // Initialize flipbook
      initFlipbook();

      // Navigation buttons
      $("#prev").click(function () {
        if (!$(this).prop("disabled")) {
          $("#flipbook").turn("previous");
        }
      });

      $("#next").click(function () {
        if (!$(this).prop("disabled")) {
          $("#flipbook").turn("next");
        }
      });

      // Responsive handling
      function resizeFlipbook() {
        if ($("#flipbook").turn("is")) {
          const container = $(".flipbook-container");
          const containerWidth = container.width();
          const containerHeight = container.height();

          // Destroy and reinitialize for better responsive behavior
          $("#flipbook").turn("destroy");

          setTimeout(() => {
            $("#flipbook").turn({
              width: containerWidth,
              height: containerHeight,
              autoCenter: true,
              gradients: true,
              acceleration: true,
              elevation: 50,
              display: window.innerWidth > 768 ? "double" : "single",
              duration: 1200,
              turnCorners: "bl,br,tl,tr",
              when: {
                turning: function (e, page, view) {
                  try {
                    const audio = new Audio(
                      "data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmYcCSmH0fPTgjMGHm7A7+OZURE="
                    );
                    audio.volume = 0.1;
                    audio.play().catch(() => { });
                  } catch (e) { }

                  if (page % 2 === 0) {
                    $(this).addClass("turning-right");
                  } else {
                    $(this).addClass("turning-left");
                  }

                  setTimeout(() => {
                    $(this).removeClass("turning-right turning-left");
                  }, 1000);
                },
                turned: function (e, page, view) {
                  $(".page-number").remove();
                  const totalPages = $(this).turn("pages");

                  $("#prev").prop("disabled", page <= 1);
                  $("#next").prop("disabled", page >= totalPages);
                },
              },
            });
          }, 100);
        }
      }

      // Debounced resize handler
      let resizeTimer;
      $(window).resize(function () {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(resizeFlipbook, 250);
      });

      // Keyboard navigation
      $(document).keydown(function (e) {
        if (e.keyCode == 37) {
          // left arrow
          e.preventDefault();
          $("#flipbook").turn("previous");
        } else if (e.keyCode == 39) {
          // right arrow
          e.preventDefault();
          $("#flipbook").turn("next");
        } else if (e.keyCode == 36) {
          // home key - go to first page
          e.preventDefault();
          $("#flipbook").turn("page", 1);
        } else if (e.keyCode == 35) {
          // end key - go to last page
          e.preventDefault();
          $("#flipbook").turn("page", $("#flipbook").turn("pages"));
        }
      });

      // Enhanced Touch/swipe support for mobile
      let touchStartX = 0;
      let touchStartY = 0;
      let touchStartTime = 0;
      let isSwiping = false;

      // Use document to ensure we capture all touch events
      $(document).on(
        "touchstart",
        "#flipbook, .flipbook, .page",
        function (e) {
          if (e.originalEvent.touches && e.originalEvent.touches.length > 0) {
            const touch = e.originalEvent.touches[0];
            touchStartX = touch.clientX;
            touchStartY = touch.clientY;
            touchStartTime = Date.now();
            isSwiping = false;
          }
        }
      );

      $(document).on(
        "touchmove",
        "#flipbook, .flipbook, .page",
        function (e) {
          if (e.originalEvent.touches && e.originalEvent.touches.length > 0) {
            const touch = e.originalEvent.touches[0];
            const diffX = Math.abs(touch.clientX - touchStartX);
            const diffY = Math.abs(touch.clientY - touchStartY);

            // If horizontal movement is greater than vertical, consider it a swipe
            if (diffX > 30 && diffX > diffY) {
              isSwiping = true;
              e.preventDefault(); // Prevent scrolling
            }
          }
        }
      );

      $(document).on("touchend", "#flipbook, .flipbook, .page", function (e) {
        if (
          e.originalEvent.changedTouches &&
          e.originalEvent.changedTouches.length > 0
        ) {
          const touch = e.originalEvent.changedTouches[0];
          const endX = touch.clientX;
          const endY = touch.clientY;
          const diffX = touchStartX - endX;
          const diffY = touchStartY - endY;
          const touchDuration = Date.now() - touchStartTime;

          // Check for valid swipe gesture
          const minSwipeDistance = 50;
          const maxSwipeTime = 1000;
          const isHorizontalSwipe = Math.abs(diffX) > Math.abs(diffY);
          const isValidDistance = Math.abs(diffX) > minSwipeDistance;
          const isValidTime = touchDuration < maxSwipeTime;

          if (
            isSwiping &&
            isHorizontalSwipe &&
            isValidDistance &&
            isValidTime
          ) {
            if (diffX > 0) {
              // Swipe left - next page
              $("#flipbook").turn("next");
            } else {
              // Swipe right - previous page
              $("#flipbook").turn("previous");
            }

            e.preventDefault();
            e.stopPropagation();
          }

          // Reset swipe state
          isSwiping = false;
        }
      });

      // Alternative swipe detection using pointer events (for better support)
      let pointerStartX = 0;
      let pointerStartY = 0;
      let isPointerDown = false;

      $("#flipbook").on("pointerdown mousedown", function (e) {
        if (
          e.type === "pointerdown" ||
          (e.type === "mousedown" && e.which === 1)
        ) {
          pointerStartX = e.clientX || e.originalEvent.clientX;
          pointerStartY = e.clientY || e.originalEvent.clientY;
          isPointerDown = true;
        }
      });

      $("#flipbook").on("pointerup mouseup", function (e) {
        if (isPointerDown) {
          const endX = e.clientX || e.originalEvent.clientX;
          const endY = e.clientY || e.originalEvent.clientY;
          const diffX = pointerStartX - endX;
          const diffY = pointerStartY - endY;

          // Check for swipe gesture
          if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
            if (diffX > 0) {
              // Swipe left - next page
              $("#flipbook").turn("next");
            } else {
              // Swipe right - previous page
              $("#flipbook").turn("previous");
            }
            e.preventDefault();
          }

          isPointerDown = false;
        }
      });

      // Prevent accidental swipes during page turns
      $("#flipbook").on("turning", function () {
        isSwiping = false;
        isPointerDown = false;
      });

      // Hover effects for interactive elements
      $(".polaroid, .photo-frame").hover(
        function () {
          $(this).css("z-index", "10");
        },
        function () {
          $(this).css("z-index", "2");
        }
      );

      // Prevent context menu on long press (mobile)
      $("#flipbook").on("contextmenu", function (e) {
        e.preventDefault();
      });

      // Handle orientation change
      $(window).on("orientationchange", function () {
        setTimeout(resizeFlipbook, 500);
      });

      // Focus management for accessibility
      $("#flipbook").attr("tabindex", "0");

      $("#flipbook").on("focus", function () {
        $(this).css("outline", "2px solid #8d6e63");
      });

      $("#flipbook").on("blur", function () {
        $(this).css("outline", "none");
      });

      // Show modal when page loads
      setTimeout(function () {
        $("#musicModal").addClass("active");
      }, 1000);

      // Audio element
      const audio = new Audio(
        "./One Direction - Where We Are (Official Audio).mp3"
      ); // Replace with your music URL
      audio.loop = true;

      // Play music button click
      $("#playMusicBtn").click(function () {
        audio.play();
        $("#musicModal").removeClass("active");
        $("#musicPlayer").addClass("active");
      });

      // Music control button click
      $("#musicControl").click(function () {
        if (audio.paused) {
          audio.play();
          $(this).find("i").removeClass("fa-play").addClass("fa-pause");
        } else {
          audio.pause();
          $(this).find("i").removeClass("fa-pause").addClass("fa-play");
        }
      });

      $(".testBtn").click(function () {
        console.log("Test button clicked");
        // You can add any additional functionality here
      });

      $(".answerBtn").click(function () {
        console.log("Jawab button clicked");
        const button = $(this);

        // Prevent multiple clicks
        if (button.hasClass('loading')) return;

        // Add loading state
        button.addClass('loading');
        button.find('i').removeClass('fa-question').addClass('fa-spinner');

        // Make API call
        $.ajax({
          url: 'send_message.php',
          method: 'POST',
          success: function (response) {
            if (response.status === 'success') {
              // Show success message
              $("#sendMessageModal").addClass("active");
              $("#hideSendMessageModalBtn").click(function () {
                $("#sendMessageModal").removeClass("active");
              });
            } else {
              // Show error message
              alert('Gagal mengirim pesan: ' + response.message);
            }
          },
          error: function (xhr, status, error) {
            // Show error message
            alert('Terjadi kesalahan: ' + error);
          },
          complete: function () {
            // Remove loading state
            button.removeClass('loading');
            button.find('i').removeClass('fa-spinner').addClass('fa-question');
          }
        });
      });

      // Handle page visibility change
      document.addEventListener("visibilitychange", function () {
        if (document.hidden) {
          audio.pause();
          $("#musicControl")
            .find("i")
            .removeClass("fa-pause")
            .addClass("fa-play");
        }
      });
    });
  </script>
</body>

</html>